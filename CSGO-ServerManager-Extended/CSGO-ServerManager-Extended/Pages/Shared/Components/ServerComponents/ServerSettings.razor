@inject IServerSettingsService _serverSettingsService
@inject ISnackbar Snackbar

<MudGrid Spacing="5">

    <MudItem xs="12">
        <MudStack>
            <MudStack Row=true Justify="Justify.SpaceBetween">
                <MudText Typo="Typo.subtitle1" Style="font-weight: bold">Server settings</MudText>
                <MudButton Size="Size.Medium" Variant="Variant.Filled" Color="Color.Primary" OnClick="SaveServerSettings">Save settings</MudButton>
            </MudStack>
            <MudDivider />
        </MudStack>
    </MudItem>

    <MudItem xs="12" sm="6">
        <MudTextField @bind-Value="csgoServer.ServerSettings.MatchCommand" Label="Start match command" Immediate=true Variant="Variant.Outlined" Placeholder="exec myMatchCfg.cfg"></MudTextField>
    </MudItem>

    <MudItem xs="12" sm="6">
        <MudTextField @bind-Value="csgoServer.ServerSettings.OvertimeCommand" Label="Start match with overtime command" Immediate=true Variant="Variant.Outlined" Placeholder="exec myOvertimeCfg.cfg"></MudTextField>
    </MudItem>

    <MudItem xs="12" sm="6">
        <MudTextField @bind-Value="csgoServer.ServerSettings.KnifeCommand" Label="Knfe round command" Immediate=true Variant="Variant.Outlined" Placeholder="exec myKnifeCfg.cfg"></MudTextField>
    </MudItem>

    <MudItem xs="12" sm="6">
        <MudTextField @bind-Value="csgoServer.ServerSettings.PracticeCommand" Label="Partice command" Immediate=true Variant="Variant.Outlined" Placeholder="exec myPracticeCfg.cfg"></MudTextField>
    </MudItem>

</MudGrid>

@code {
    [Parameter, EditorRequired]
    public ICsgoServer csgoServer { get; set; } 

    private void SaveServerSettings()
    {
        try
        {
            _serverSettingsService.UpdateServerSettings(csgoServer.ServerSettings);
            Snackbar.Add("Server settings updated", Severity.Success);
        }
        catch (Exception e)
        {
            Snackbar.Add(e.Message, Severity.Warning);
        }
    }
}